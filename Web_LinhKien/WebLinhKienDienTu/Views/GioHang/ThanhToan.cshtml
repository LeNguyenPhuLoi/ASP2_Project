@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}
@using Microsoft.AspNetCore.Identity
@using WebLinhKienDienTu.Models
@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@{
    ViewData["Title"] = "Home Page";
}

@model List<WebLinhKienDienTu.ViewModels.GioHangViewModel>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Shop Homepage - Start Bootstrap Template</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="~/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <style>
        .pagination {
            display: flex;
            justify-content: center; /* Căn giữa theo chiều ngang */
            align-items: center;
        }

    </style>

</head>

<body>
    @if (SignInManager.IsSignedIn(User) && User.IsInRole("User"))
    {
        if (Model != null)
        {
            <div class="container mt-4">
                <div class="card shadow-lg">
                    <div class="card-header bg-success text-white d-flex justify-content-between align-items-center">
                        <h4 class="mb-0"><b>Thanh Toán</b></h4>
                        <div class="float-end">
                            <a class="btn btn-light btn-sm" asp-controller="GioHang" asp-action="GioHang" asp-route-email="@User.Identity.Name">Quay Lại</a>
                        </div>
                    </div>

                    <div class="card-body">

                        <!-- Bảng danh sách -->
                        <div 
                            class="text-center"><img class="card-img-top" style="width: 300px; height: 300px" src="~/img/QR.jpg" />
                            <p class="fst-italic" style="color: gray">*PAY CODE MINDLESS*</p>
                        </div>                    
                        <table class="table table-bordered text-center align-middle">
                            <thead class="table-secondary">
                                <tr>
                                    <th>Mã Sản Phẩm</th>
                                    <th>Tên Sản Phẩm</th>
                                    <th>Số Lượng</th>
                                    <th>Giá<br>( in $)</th>
                                    <th>Tổng<br>( in $)</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var item in Model)
                                {
                                    <tr>
                                        <td>@item.Masp</td>
                                        <td>@item.Tensp</td>
                                        <td>@item.Soluong</td>
                                        <td>@item.Gia</td>
                                        <td>@(item.Soluong * item.Gia)</td>
                                    </tr>
                                }
                            </tbody>
                        </table>

                        <nav>
                            <ul class="pagination justify-content-center">

                                @if (ViewBag.Page > 1)
                                {
                                    <li class="page-item">
                                        <a class="page-link" href="@Url.Action("ThanhToan", new { page = ViewBag.Page - 1 })">Previous</a>
                                    </li>
                                }

                                @for (int i = 1; i <= ViewBag.TotalPage; i++)
                                {
                                    <li class="page-item @(i == ViewBag.Page ? "active" : "")">
                                        <a class="page-link" href="@Url.Action("ThanhToan", new { page = i })">@i</a>
                                    </li>
                                }

                                @if (ViewBag.Page < ViewBag.TotalPage)
                                {
                                    <li class="page-item">
                                        <a class="page-link" href="@Url.Action("ThanhToan", new { page = ViewBag.Page + 1 })">Next</a>
                                    </li>
                                }

                            </ul>
                        </nav>         

                    </div>
                </div>
            </div>
        }

    }
</body>

</html>